<!DOCTYPE html>
<html lang="pt-BR">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="icon" href="favicon.ico" type="image/x-icon">
        <title>PJ - Consulta CNAES</title>
        
        <style>
            .edit-icon { cursor: pointer; margin-left: 10px; color: #005abb; }
            .info-icon { cursor: pointer; margin-left: 10px; color: rgba(235, 153, 1, 0.884); }
            body{ min-width: 650px; font-family: Arial, Helvetica, sans-serif; background-color: #f7f8fa; }
            header { background-color: #005abb; color: white; padding: 10px; margin-bottom: 0px; text-align: center; }
            ul { padding: 0px; margin: 0px; list-style: none; }
            .lateral ul li { background: #14385d; }
            li { font-family: Arial, Helvetica, sans-serif; }
            #menu-esquerda, #menu-direita { float: left; width: 20%; }
            .despacho { float: left; width: 58%; margin: 0px 5px; }
            .lateral ul a { font-size: 0.9em; display: block; padding: 0.5em 1.5em; text-decoration: none; color: azure; }
            .lateral ul a:hover { background-color: #244575; }
            #inputCnpj { margin: 10px 20px; width: calc(100% - 40px); max-width: calc(100% - 40px); }
            #container-button{ text-align: center; margin: 10px; }
            button { padding: 10px 20px; margin: 5px; border: none; border-radius: 5px; color: white; cursor: pointer; }
            .mt-4 { color: #44546a; }
            #atualizarBtn.btn-outline-success { border-color: #28a745; color: #28a745; }
            #atualizarBtn.btn-outline-success:hover { background-color: #28a745; color: white; }
            #deletarBtn.btn-outline-danger { border-color: #dc3545; color: #dc3545; }
            #deletarBtn.btn-outline-danger:hover { background-color: #dc3545; color: white; }
            .siccau-color { background-color: #005abb !important; }
            .cnae-nao-encontrado-local {
                background-color: #fff3cd; 
                border: 1px solid #ffeeba;
                padding: 0.75rem 1.25rem;
                border-radius: .25rem;
                color: #856404;
            }
            .cnae-nao-encontrado-local strong {
                color: #664d03;
            }
            #tabelaReferenciaContainer {
                display: none; /* Mantém a tabela oculta inicialmente */
            }
            #toggleTabelaReferenciaBtn {
                background-color: #6c757d; 
                border-color: #6c757d;
                margin-bottom: 15px; 
            }
            #toggleTabelaReferenciaBtn:hover {
                background-color: #5a6268;
                border-color: #545b62;
            }
        </style>
    </head>
    <body>
        <nav class="navbar navbar-expand-lg navbar-dark siccau-color">
            <a href="../Index.html"><img src="cau.png" width="233" height="75" alt="Início" class="img-fluid"></a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#conteudoNavbarSuportado" aria-controls="conteudoNavbarSuportado" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button> 
            <div class="collapse navbar-collapse" id="conteudoNavbarSuportado">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item dropdown active">
                        <a class="nav-link dropdown-toggle" style="font-size: 20px; margin-left: 20px;" href="#" id="navbarDropdownPJ" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Despachos Pessoa Jurídica</a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdownPJ">
                            <a class="dropdown-item" href="registro_empresa.html">Registro de Empresa</a>                           
                            <a class="dropdown-item" href="alteracao_cadastral.html">Alteração Cadastral</a>
                            <a class="dropdown-item" href="inclusao_email.html">Inclusão de email</a>
                            <a class="dropdown-item" href="baixa_registro_empresa.html">Baixa de Registro</a>
                            <a class="dropdown-item" href="baixa_registro_empresa_oficio.html">Baixa de Registro de Ofício</a>
                            <a class="dropdown-item" href="interrupcao_registro_empresa.html">Interrupção de Registro</a>
                            <a class="dropdown-item" href="inclusao_responsavel_tecnico.html">Inclusão de Responsável Técnico</a>
                            <a class="dropdown-item" href="baixa_responsavel_tecnico.html">Baixa de Responsável Técnico</a>
                            <a class="dropdown-item" href="desconto_anuidade.html">Desconto de Anuidade</a>
                            <a class="dropdown-item" href="crqpj.html">CRQPJ</a>
                            <a class="dropdown-item" href="despachos_gerais.html">Despachos Gerais</a>
                            <a class="dropdown-item" href="consulta_cnae.html">Consulta CNAE</a>                            
                        </div>
                    </li>
                   <li class="nav-item dropdown active">
                       <a class="nav-link dropdown-toggle" style="font-size: 20px;margin-right: 20px;" href="#" id="navbarDropdownPF" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Despachos Pessoa Física</a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdownPF">              
                            <a class="dropdown-item" href="../PF/rrts-01.html">RRTs</a>
                            <a class="dropdown-item" href="../PF/cat-01.html">CAT-A</a>
                            <a class="dropdown-item" href="../PF/rda-01.html">RDA</a>
                            <a class="dropdown-item" href="../PF/status-01.html">Status de RRT</a>
                            <a class="dropdown-item" href="../PF/interrupcao-01.html">Interrupção de Registro</a>
                            <a class="dropdown-item" href="../PF/protocolos-01.html">Protocolos</a>
                            <a class="dropdown-item" href="../PF/email-01.html">E-mail</a>
                            <a class="dropdown-item" href="../PF/siccau-01.html">SICCAU</a>                                                    
                        </div>
                    </li>
                </ul>
                <ul class="navbar-nav">
                    <li class="nav-item"><a class="nav-link" href="../piso-semanal.html" target="_blank">Calculadora Piso</a></li>
                    <li class="nav-item"><a class="nav-link" href="https://acesso.caubr.gov.br/" target="_blank">SICCAU</a></li> 
                    <li class="nav-item"><a class="nav-link" href="https://transparencia.caubr.gov.br/resolucoes/" target="_blank">Resoluções</a></li>
                    <li class="nav-item"><a class="nav-link" href="https://servicos.caubr.gov.br/helpdesk/doku.php" target="_blank">Tutoriais Helpdesk</a></li>
                    <li class="nav-item"><a class="nav-link" href="https://ria.caubr.gov.br" target="_blank">Tutoriais RIA</a></li>
                    <li class="nav-item"><a class="nav-link" href="https://gad.caubr.gov.br" target="_blank">GAD</a></li>
                </ul>
            </div>
        </nav>
            
        <div class="container">
            <h2 class="text-center my-4" style="text-align: center; color: gray">Consulta CNAEs por CNPJ</h2>
            <div class="row">
                <div class="col">
                    <input type="text" class="form-control" id="inputCnpj" placeholder="Digite o CNPJ da empresa (apenas números)">
                    <p style="font-style: italic; margin-left: 20px; margin-right: 20px;">CNAEs principal e secundários afins permitirão cópia. Atividades não encontradas serão apenas listadas.</p>
                </div>
            </div>
            <div class="row">
                <div class="col d-flex justify-content-center my-3">
                    <button id="atualizarBtn" class="btn btn-sm btn-outline-success mx-1" style="width: auto; padding: 10px 20px;">Consultar CNAEs</button>
                    <button id="deletarBtn" class="btn btn-sm btn-outline-danger mx-1" style="width: auto; padding: 10px 20px;">Limpar</button>
                </div>
            </div>
            <div class="row mt-1">
                <div id="outputCnaes" class="col-12">
                    <!-- Aqui serão inseridos os grupos de CNAEs -->
                </div>
            </div>

            <div class="row mt-4">
                <div class="col text-center">
                    <button id="toggleTabelaReferenciaBtn" class="btn btn-secondary">Mostrar Tabela de Referência de CNAEs</button>
                </div>
            </div>

            <div id="tabelaReferenciaContainer" class="mt-3">
                <div class="bd-callout bd-callout-info" style="margin: 0 30px 30px 30px;"> 
                    <h4 class="mt-2 mb-4">Tabela de Atividades Econômicas Relacionadas à Arquitetura e Urbanismo:</h4>  
                    <table class="table table-sm table-hover">
                        <thead>
                        <tr>
                            <th scope="col">Ordem</th>
                            <th scope="col" class="text-center">CNAE</th>
                            <th scope="col">Atividade Econômica</th>
                        </tr>
                        </thead>
                        <tbody>
                            <tr><th scope="row" class="text-center">1</th><td>2330-3/01</td><td>Fabricação de estruturas pré-moldadas de concreto armado, em série e sob encomenda</td></tr>
                            <tr><th scope="row" class="text-center">2</th><td>2330-3/02</td><td>Fabricação de artefatos de cimento para uso na construção</td></tr>
                            <tr><th scope="row" class="text-center">3</th><td>2330-3/99</td><td>Fabricação de outros artefatos e produtos de concreto, cimento, fibrocimento, gesso e materiais semelhantes</td></tr>
                            <tr><th scope="row" class="text-center">4</th><td>2599-3/01</td><td>Serviços de confecção de armações metálicas para a construção</td></tr>
                            <tr><th scope="row" class="text-center">5</th><td>3299-0/03</td><td>Fabricação de letras, letreiros e placas de qualquer material, exceto luminosos</td></tr>
                            <tr><th scope="row" class="text-center">6</th><td>3299-0/04</td><td>Fabricação de painéis e letreiros luminosos</td></tr>
                            <tr><th scope="row" class="text-center">7</th><td>4120-1/00</td><td>NÃO ENCONTRADA</td></tr>
                            <tr><th scope="row" class="text-center">8</th><td>4120-4/00</td><td>Construção de edifícios</td></tr>
                            <tr><th scope="row" class="text-center">9</th><td>4213-8/00</td><td>Obras de urbanização - ruas, praças e calçadas</td></tr>
                            <tr><th scope="row" class="text-center">10</th><td>4222-7/01</td><td>Construção de redes de abastecimento de água, coleta de esgoto e construções correlatas, exceto obras de irrigação</td></tr>
                            <tr><th scope="row" class="text-center">11</th><td>4222-7/02</td><td>Obras de irrigação</td></tr>
                            <tr><th scope="row" class="text-center">12</th><td>4292-8/01</td><td>Montagem de estruturas metálicas</td></tr>
                            <tr><th scope="row" class="text-center">13</th><td>4299-5/01</td><td>Construção de instalações esportivas e recreativas</td></tr>
                            <tr><th scope="row" class="text-center">14</th><td>4311-8/01</td><td>Demolição de edifícios e outras estruturas</td></tr>
                            <tr><th scope="row" class="text-center">15</th><td>4311-8/02</td><td>Preparação de canteiro e limpeza de terreno</td></tr>
                            <tr><th scope="row" class="text-center">16</th><td>4312-6/00</td><td>Perfurações e sondagens</td></tr>
                            <tr><th scope="row" class="text-center">17</th><td>4313-4/00</td><td>Obras de terraplenagem</td></tr>
                            <tr><th scope="row" class="text-center">18</th><td>4319-3/00</td><td>Serviços de preparação do terreno não especificados anteriormente</td></tr>
                            <tr><th scope="row" class="text-center">19</th><td>4321-5/00</td><td>Instalação e manutenção elétrica</td></tr>
                            <tr><th scope="row" class="text-center">20</th><td>4322-3/01</td><td>Instalações hidráulicas, sanitárias e de gás</td></tr>
                            <tr><th scope="row" class="text-center">21</th><td>4322-3/02</td><td>Instalação e manutenção de sistemas centrais de ar condicionado, de ventilação e refrigeração</td></tr>
                            <tr><th scope="row" class="text-center">22</th><td>4322-3/03</td><td>Instalações de sistema de prevenção contra incêndio</td></tr>
                            <tr><th scope="row" class="text-center">23</th><td>4329-1/01</td><td>Instalação de painéis publicitários</td></tr>
                            <tr><th scope="row" class="text-center">24</th><td>4329-1/03</td><td>Instalação, manutenção e reparação de elevadores, escadas e esteiras rolantes</td></tr>
                            <tr><th scope="row" class="text-center">25</th><td>4329-1/04</td><td>Montagem e instalação de sistemas e equipamentos de iluminação e sinalização em vias públicas, portos e aeroportos</td></tr>
                            <tr><th scope="row" class="text-center">26</th><td>4329-1/05</td><td>Tratamentos térmicos, acústicos ou de vibração</td></tr>
                            <tr><th scope="row" class="text-center">27</th><td>4329-1/99</td><td>Outras obras de instalações em construções não especificadas anteriormente</td></tr>
                            <tr><th scope="row" class="text-center">28</th><td>4330-4/01</td><td>Impermeabilização em obras de engenharia civil</td></tr>
                            <tr><th scope="row" class="text-center">29</th><td>4330-4/02</td><td>Instalação de portas, janelas, tetos, divisórias e armários embutidos de qualquer material</td></tr>
                            <tr><th scope="row" class="text-center">30</th><td>4330-4/03</td><td>Obras de acabamento em gesso e estuque</td></tr>
                            <tr><th scope="row" class="text-center">31</th><td>4330-4/04</td><td>Serviços de pintura de edifícios em geral</td></tr>
                            <tr><th scope="row" class="text-center">32</th><td>4330-4/05</td><td>Aplicação de revestimentos e de resinas em interiores e exteriores</td></tr>
                            <tr><th scope="row" class="text-center">33</th><td>4330-4/99</td><td>Outras obras de acabamento da construção</td></tr>
                            <tr><th scope="row" class="text-center">34</th><td>4391-6/00</td><td>Obras de fundações</td></tr>
                            <tr><th scope="row" class="text-center">35</th><td>4399-1/01</td><td>Administração de obras</td></tr>
                            <tr><th scope="row" class="text-center">36</th><td>4399-1/02</td><td>Montagem e desmontagem de andaimes e outras estruturas temporárias</td></tr>
                            <tr><th scope="row" class="text-center">37</th><td>4399-1/03</td><td>Obras de alvenaria</td></tr>
                            <tr><th scope="row" class="text-center">38</th><td>4399-1/04</td><td>Serviços de operação e fornecimento de equipamentos para transporte e elevação de cargas e pessoas para uso em obras</td></tr>
                            <tr><th scope="row" class="text-center">39</th><td>4399-1/05</td><td>Perfuração e construção de poços de água</td></tr>
                            <tr><th scope="row" class="text-center">40</th><td>4399-1/99</td><td>Serviços especializados para construção não especificados anteriormente</td></tr>
                            <tr><th scope="row" class="text-center">41</th><td>6810-2/03</td><td>Loteamento de imóveis próprios</td></tr>
                            <tr><th scope="row" class="text-center">42</th><td>6821-8/01</td><td>Corretagem na compra e venda e avaliação de imóveis</td></tr>
                            <tr><th scope="row" class="text-center">43</th><td>7111-1/00</td><td>Serviços de arquitetura</td></tr>
                            <tr><th scope="row" class="text-center">44</th><td>7119-7/01</td><td>Serviços de cartografia, topografia e geodésia</td></tr>
                            <tr><th scope="row" class="text-center">45</th><td>7119-7/02</td><td>Atividades de estudos geológicos</td></tr>
                            <tr><th scope="row" class="text-center">46</th><td>7119-7/03</td><td>Serviços de desenho técnico relacionados à arquitetura e engenharia</td></tr>
                            <tr><th scope="row" class="text-center">47</th><td>7119-7/04</td><td>Serviços de perícia técnica relacionados à segurança do trabalho</td></tr>
                            <tr><th scope="row" class="text-center">48</th><td>7119-7/99</td><td>Atividades técnicas relacionadas à engenharia e arquitetura não especificadas anteriormente</td></tr>
                            <tr><th scope="row" class="text-center">49</th><td>7319-0/01</td><td>Criação de estandes para feiras e exposições</td></tr>
                            <tr><th scope="row" class="text-center">50</th><td>7490-1/99</td><td>Outras atividades profissionais, científicas e técnicas não especificadas anteriormente</td></tr>
                            <tr><th scope="row" class="text-center">51</th><td>7410-2/02</td><td>Design de Interiores</td></tr>
                            <tr><th scope="row" class="text-center">52</th><td>8130-3/00</td><td>Atividades paisagísticas</td></tr>
                            <tr><th scope="row" class="text-center">53</th><td>8230-0/01</td><td>Serviços de organização de feiras, congressos, exposições e festas</td></tr>
                            <tr><th scope="row" class="text-center">54</th><td>8599-6/04</td><td>Treinamento em desenvolvimento profissional e gerencial</td></tr>
                            <tr><th scope="row" class="text-center">55</th><td>8599-6/99</td><td>Outras atividades de ensino não especificadas anteriormente</td></tr>
                            <tr><th scope="row" class="text-center">56</th><td>9001-9/06</td><td>Atividades de sonorização e de iluminação</td></tr>
                            <tr><th scope="row" class="text-center">57</th><td>9102-3/02</td><td>Restauração e conservação de lugares e prédios históricos</td></tr>
                            <tr><th scope="row" class="text-center">58</th><td>9311-5/00</td><td>Gestão de instalações de esportes</td></tr>
                            <tr><th scope="row" class="text-center">59</th><td>9529-1/05</td><td>Reparação de artigos do mobiliário</td></tr>
                            <tr><th scope="row" class="text-center">60</th><td>4211-1/01</td><td>Construção de rodovias e ferrovias</td></tr>
                            <tr><th scope="row" class="text-center">61</th><td>4211-1/02</td><td>Pintura para sinalização em pistas rodoviárias e aeroportos</td></tr>
                            <tr><th scope="row" class="text-center">62</th><td>4221-9/03</td><td>Manutenção de redes de distribuição de energia elétrica</td></tr>
                            <tr><th scope="row" class="text-center">63</th><td>3329-5/01</td><td>Serviços de montagem de móveis de qualquer material</td></tr>
                        </tbody>
                    </table>
                </div>
            </div> 
        </div> 
        
        <footer class="siccau-color text-light d-flex align-items-center justify-content-center py-2 mt-3">
            <p class="m-1">Gerência de Fiscalização e Registros - CAU/AP</p>
        </footer>

        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

        <script>
            $(document).ready(function(){
                var cnaeList = [
                    {cnae: "2330-3/01", atividade: "Fabricação de estruturas pré-moldadas de concreto armado, em série e sob encomenda"},
                    {cnae: "2330-3/02", atividade: "Fabricação de artefatos de cimento para uso na construção"},
                    {cnae: "2330-3/99", atividade: "Fabricação de outros artefatos e produtos de concreto, cimento, fibrocimento, gesso e materiais semelhantes"},
                    {cnae: "2599-3/01", atividade: "Serviços de confecção de armações metálicas para a construção"},
                    {cnae: "3299-0/03", atividade: "Fabricação de letras, letreiros e placas de qualquer material, exceto luminosos"},
                    {cnae: "3299-0/04", atividade: "Fabricação de painéis e letreiros luminosos"},
                    {cnae: "4120-1/00", atividade: "NÃO ENCONTRADA"},
                    {cnae: "4120-4/00", atividade: "Construção de edifícios"},
                    {cnae: "4213-8/00", atividade: "Obras de urbanização - ruas, praças e calçadas"},
                    {cnae: "4222-7/01", atividade: "Construção de redes de abastecimento de água, coleta de esgoto e construções correlatas, exceto obras de irrigação"},
                    {cnae: "4222-7/02", atividade: "Obras de irrigação"},
                    {cnae: "4292-8/01", atividade: "Montagem de estruturas metálicas"},
                    {cnae: "4299-5/01", atividade: "Construção de instalações esportivas e recreativas"},
                    {cnae: "4311-8/01", atividade: "Demolição de edifícios e outras estruturas"},
                    {cnae: "4311-8/02", atividade: "Preparação de canteiro e limpeza de terreno"},
                    {cnae: "4312-6/00", atividade: "Perfurações e sondagens"},
                    {cnae: "4313-4/00", atividade: "Obras de terraplenagem"},
                    {cnae: "4319-3/00", atividade: "Serviços de preparação do terreno não especificados anteriormente"},
                    {cnae: "4321-5/00", atividade: "Instalação e manutenção elétrica"},
                    {cnae: "4322-3/01", atividade: "Instalações hidráulicas, sanitárias e de gás"},
                    {cnae: "4322-3/02", atividade: "Instalação e manutenção de sistemas centrais de ar condicionado, de ventilação e refrigeração"},
                    {cnae: "4322-3/03", atividade: "Instalações de sistema de prevenção contra incêndio"},
                    {cnae: "4329-1/01", atividade: "Instalação de painéis publicitários"},
                    {cnae: "4329-1/03", atividade: "Instalação, manutenção e reparação de elevadores, escadas e esteiras rolantes"},
                    {cnae: "4329-1/04", atividade: "Montagem e instalação de sistemas e equipamentos de iluminação e sinalização em vias públicas, portos e aeroportos"},
                    {cnae: "4329-1/05", atividade: "Tratamentos térmicos, acústicos ou de vibração"},
                    {cnae: "4329-1/99", atividade: "Outras obras de instalações em construções não especificadas anteriormente"},
                    {cnae: "4330-4/01", atividade: "Impermeabilização em obras de engenharia civil"},
                    {cnae: "4330-4/02", atividade: "Instalação de portas, janelas, tetos, divisórias e armários embutidos de qualquer material"},
                    {cnae: "4330-4/03", atividade: "Obras de acabamento em gesso e estuque"},
                    {cnae: "4330-4/04", atividade: "Serviços de pintura de edifícios em geral"},
                    {cnae: "4330-4/05", atividade: "Aplicação de revestimentos e de resinas em interiores e exteriores"},
                    {cnae: "4330-4/99", atividade: "Outras obras de acabamento da construção"},
                    {cnae: "4391-6/00", atividade: "Obras de fundações"},
                    {cnae: "4399-1/01", atividade: "Administração de obras"},
                    {cnae: "4399-1/02", atividade: "Montagem e desmontagem de andaimes e outras estruturas temporárias"},
                    {cnae: "4399-1/03", atividade: "Obras de alvenaria"},
                    {cnae: "4399-1/04", atividade: "Serviços de operação e fornecimento de equipamentos para transporte e elevação de cargas e pessoas para uso em obras"},
                    {cnae: "4399-1/05", atividade: "Perfuração e construção de poços de água"},
                    {cnae: "4399-1/99", atividade: "Serviços especializados para construção não especificados anteriormente"},
                    {cnae: "6810-2/03", atividade: "Loteamento de imóveis próprios"},
                    {cnae: "6821-8/01", atividade: "Corretagem na compra e venda e avaliação de imóveis"},
                    {cnae: "7111-1/00", atividade: "Serviços de arquitetura"},
                    {cnae: "7119-7/01", atividade: "Serviços de cartografia, topografia e geodésia"},
                    {cnae: "7119-7/02", atividade: "Atividades de estudos geológicos"},
                    {cnae: "7119-7/03", atividade: "Serviços de desenho técnico relacionados à arquitetura e engenharia"},
                    {cnae: "7119-7/04", atividade: "Serviços de perícia técnica relacionados à segurança do trabalho"},
                    {cnae: "7119-7/99", atividade: "Atividades técnicas relacionadas à engenharia e arquitetura não especificadas anteriormente"},
                    {cnae: "7319-0/01", atividade: "Criação de estandes para feiras e exposições"},
                    {cnae: "7490-1/99", atividade: "Outras atividades profissionais, científicas e técnicas não especificadas anteriormente"},
                    {cnae: "7410-2/02", atividade: "Design de Interiores"},
                    {cnae: "8130-3/00", atividade: "Atividades paisagísticas"},
                    {cnae: "8230-0/01", atividade: "Serviços de organização de feiras, congressos, exposições e festas"},
                    {cnae: "8599-6/04", atividade: "Treinamento em desenvolvimento profissional e gerencial"},
                    {cnae: "8599-6/99", atividade: "Outras atividades de ensino não especificadas anteriormente"},
                    {cnae: "9001-9/06", atividade: "Atividades de sonorização e de iluminação"},
                    {cnae: "9102-3/02", atividade: "Restauração e conservação de lugares e prédios históricos"},
                    {cnae: "9311-5/00", atividade: "Gestão de instalações de esportes"},
                    {cnae: "9529-1/05", atividade: "Reparação de artigos do mobiliário"},
                    {cnae: "4211-1/01", atividade: "Construção de rodovias e ferrovias"},
                    {cnae: "4211-1/02", atividade: "Pintura para sinalização em pistas rodoviárias e aeroportos"},
                    {cnae: "4221-9/03", atividade: "Manutenção de redes de distribuição de energia elétrica"},
                    {cnae: "3329-5/01", atividade: "Serviços de montagem de móveis de qualquer material"}
                ];
                const MENSAGEM_NAO_ENCONTRADO_LOCAL = "*** Atividade não encontrada na lista local ***";

                function formatCnae(cnaeStr) {
                    if (!cnaeStr || cnaeStr.length < 5 || cnaeStr.length > 7) { 
                        return cnaeStr; 
                    }
                    const paddedCnae = String(cnaeStr).padStart(7, '0');
                    return paddedCnae.substr(0, 4) + "-" + paddedCnae.charAt(4) + "/" + paddedCnae.substr(5);
                }

                function findAtividade(cnae) {
                    for (var i = 0; i < cnaeList.length; i++) {
                        if (cnaeList[i].cnae === cnae) {
                            return cnaeList[i].atividade;
                        }
                    }
                    return MENSAGEM_NAO_ENCONTRADO_LOCAL;
                }

                $("#toggleTabelaReferenciaBtn").click(function() {
                    console.log("Botão 'toggleTabelaReferenciaBtn' clicado!"); // Log para depuração
                    var $tabelaContainer = $("#tabelaReferenciaContainer");
                    
                    if ($tabelaContainer.is(":visible")) {
                        $tabelaContainer.hide();
                        $(this).text("Mostrar Tabela de Referência de CNAEs");
                    } else {
                        $tabelaContainer.show();
                        $(this).text("Ocultar Tabela de Referência de CNAEs");
                    }
                });

                $("#atualizarBtn").click(async function(){ 
                    var cnpj = $("#inputCnpj").val().replace(/\D/g,''); 
                    $("#outputCnaes").empty().html('<p class="text-info">Consultando...</p>'); 

                    if (cnpj.length !== 14) {
                        $("#outputCnaes").html('<p class="text-danger">CNPJ inválido. Por favor, insira 14 dígitos numéricos.</p>');
                        return;
                    }

                    const apiUrl = `https://minhareceita.org/cnpj/${cnpj}`;

                    try {
                        const response = await fetch(apiUrl);
                        
                        if (!response.ok) {
                            let errorMessage = `Erro ao consultar o CNPJ (status: ${response.status}).`;
                            try {
                                const errorData = await response.json();
                                errorMessage = errorData.message || errorMessage;
                                if (response.status === 404) errorMessage = "CNPJ não encontrado ou inválido.";
                                if (response.status === 429) errorMessage = "Muitas requisições. Por favor, aguarde um momento e tente novamente.";
                            } catch (e) { /* Não conseguiu parsear o JSON de erro */ }
                            $("#outputCnaes").html(`<p class="text-danger">${errorMessage}</p><p class="text-warning small">Observação: Se o problema persistir, pode ser uma limitação temporária da API ou uma restrição de CORS.</p>`);
                            return;
                        }

                        const data = await response.json();
                        $("#outputCnaes").empty(); 

                        let cnaesProcessados = [];

                        if (data.cnae_fiscal) {
                            cnaesProcessados.push({
                                codigo: String(data.cnae_fiscal),
                                descricaoApi: data.cnae_fiscal_descricao || "Descrição não fornecida pela API.",
                                tipo: 'Principal'
                            });
                        }

                        if (data.cnaes_secundarios && data.cnaes_secundarios.length > 0) {
                            data.cnaes_secundarios.forEach(function(cnae_sec) {
                                cnaesProcessados.push({
                                    codigo: String(cnae_sec.codigo),
                                    descricaoApi: cnae_sec.descricao || "Descrição não fornecida pela API.",
                                    tipo: 'Secundário'
                                });
                            });
                        }

                        if (cnaesProcessados.length === 0) {
                            $("#outputCnaes").html('<p class="text-info">Nenhum CNAE (principal ou secundário) encontrado para o CNPJ informado.</p>');
                            return;
                        }
                        
                        let atividadesEncontradasHTML = [];
                        let atividadesNaoEncontradasHTML = [];

                        cnaesProcessados.forEach(function(cnaeInfo) {
                            var formattedCnae = formatCnae(cnaeInfo.codigo);
                            var atividadeLocal = findAtividade(formattedCnae); 
                            
                            let tipoCnaeLabel = '';
                            if (cnaeInfo.tipo === 'Principal') {
                                tipoCnaeLabel = ' <span class="badge badge-primary">Principal</span>';
                            } else {
                                tipoCnaeLabel = ' <span class="badge badge-secondary">Secundário</span>';
                            }

                            var cnaeDivHTML;

                            if (atividadeLocal !== MENSAGEM_NAO_ENCONTRADO_LOCAL) {
                                cnaeDivHTML =
                                    '<div class="row mb-2">' +
                                        '<div class="col-md-4 col-lg-3" style="min-width: 220px;">' +
                                            '<div class="input-group">' +
                                                '<input type="text" class="form-control text-center" value="' + formattedCnae + '" readonly>' +
                                                '<div class="input-group-append">' +
                                                    '<button class="btn btn-sm btn-outline-success btnCopiar" type="button">Copiar</button>' +
                                                '</div>' +
                                            '</div>' +
                                        '</div>' +
                                        '<div class="col-md-8 col-lg-9">' +
                                            '<div class="d-flex align-items-center">' +
                                                '<input class="form-control" type="text" value="' + atividadeLocal + '" readonly>' +
                                                '<div class="ml-2">' + tipoCnaeLabel + '</div>' +
                                            '</div>' +
                                        '</div>' +
                                    '</div>';
                                atividadesEncontradasHTML.push(cnaeDivHTML);
                            } else {
                                cnaeDivHTML =
                                    '<div class="row mb-2 cnae-nao-encontrado-local align-items-center">' +
                                        '<div class="col-md-4 col-lg-3">' + 
                                            '<strong>CNAE:</strong> ' + formattedCnae +
                                        '</div>' +
                                        '<div class="col-md-8 col-lg-9">' + 
                                            cnaeInfo.descricaoApi +
                                            '<div class="ml-2 d-inline-block">' + tipoCnaeLabel + '</div>' +
                                        '</div>' +
                                    '</div>';
                                atividadesNaoEncontradasHTML.push(cnaeDivHTML);
                            }
                        });

                        if (atividadesEncontradasHTML.length > 0) {
                            $("#outputCnaes").append('<h4>Atividades Econômicas Relacionadas à Arquitetura e Urbanismo:</h4>');
                            atividadesEncontradasHTML.forEach(function(divHtml) {
                                $("#outputCnaes").append(divHtml);
                            });
                        }

                        if (atividadesNaoEncontradasHTML.length > 0) {
                            $("#outputCnaes").append('<h4 class="mt-3">Atividades Econômicas NÃO Relacionadas à Arquitetura e Urbanismo:</h4>');
                            atividadesNaoEncontradasHTML.forEach(function(divHtml) {
                                $("#outputCnaes").append(divHtml);
                            });
                        }

                        if (atividadesEncontradasHTML.length === 0 && atividadesNaoEncontradasHTML.length === 0) { 
                            $("#outputCnaes").html('<p class="text-info">Não foram encontrados CNAEs válidos para exibir.</p>');
                        }

                    } catch (error) {
                        console.error("Erro na requisição ou processamento:", error);
                        $("#outputCnaes").html('<p class="text-danger">Ocorreu um erro ao buscar ou processar os dados do CNPJ. Verifique o console para mais detalhes.</p><p class="text-warning small">Observação: Este erro também pode ser devido a problemas de rede, a API estar temporariamente indisponível, ou restrições de CORS.</p>');
                    }
                }); 

                $(document).on("click", ".btnCopiar", function(){
                    var cnaeValue = $(this).closest(".input-group").find("input").val();
                    var tempInput = $("<input>");
                    $("body").append(tempInput);
                    tempInput.val(cnaeValue).select();
                    document.execCommand("copy");
                    tempInput.remove();
                    $(this).text('Copiado!').prop('disabled', true);
                    setTimeout(() => {
                        $(this).text('Copiar').prop('disabled', false);
                    }, 1500);
                });

                $("#deletarBtn").click(function(){
                    $("#outputCnaes").empty(); 
                    $("#inputCnpj").val(""); 
                });
            }); 
        </script>
    </body>
</html>